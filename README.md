# NetTune

고속 네트워크 환경을 사용하는 사용자와 관리자를 위한 네트워크 진단 및 튜닝 가이드 프로그램입니다.
사용자의 시스템(Unix/Linux/macOS) 환경을 분석하여 물리적 스펙에 맞는 최적의 전송 속도를 낼 수 있도록 가이드라인을 제시합니다.

## 주요 기능

1. **인터페이스 식별**: 외부 네트워크로 연결된 기본 NIC를 자동으로 탐색합니다.
2. **물리 속도 체크**: 현재 연결된 하드웨어의 링크 속도를 확인합니다.
3. **MTU 확인**: 점보 프레임(Jumbo Frame) 설정 여부를 확인합니다.
4. **TCP/IP 버퍼 추출**: 현재 설정된 송수신 버퍼 크기를 확인합니다.
5. **혼잡제어 알고리즘**: 현재 적용 중인 TCP 혼잡제어 알고리즘(Cubic, BBR 등)을 확인합니다.
6. **튜닝 가이드라인**: 시스템 RAM 용량을 고려하여 고속 전송을 위한 권장 버퍼 크기를 계산합니다.
7. **CPU Governor**: CPU 성능 모드 설정 여부를 확인합니다 (Linux 전용).
8. **실시간 속도 측정**: `iperf3`를 연동하여 실제 대역폭을 측정할 수 있는 별도의 메뉴를 제공합니다.

## 설치 및 실행 방법

### 사전 요구 사항
- Python 3.x
- `psutil` 라이브러리 (시스템 메모리 계산용)

### 라이브러리 설치
```bash
pip install psutil
```

### 프로그램 실행
```bash
python3 nettune.py
```

## Linux 네트워크 튜닝 (ESnet Fasterdata 기반)

메뉴 3번 "전송 고속망 최적화 설정 적용"에서 Linux 환경 전용 서브메뉴를 제공합니다.

| 메뉴 | 기능 | 설명 |
|------|------|------|
| 1 | 일반 호스트 튜닝 | NIC 속도/RTT 기준 TCP 버퍼 최적화 (10G/40G/100G 프리셋) |
| 2 | 테스트/측정 호스트 튜닝 | 일반보다 큰 버퍼 + `tcp_no_metrics_save` 추가 |
| 3 | 100G NIC 드라이버 최적화 | Ring Buffer, Interrupt Coalescence, Flow Control, CPU Governor |
| 4 | 패킷 페이싱 설정 | fq qdisc 활성화 및 tc maxrate 설정 |
| 5 | UDP 튜닝 | 소켓 버퍼 확장 및 Jumbo Frame(MTU 9000) 설정 |
| 6 | BBR 혼잡제어 활성화 | `tcp_bbr` 모듈 로드 및 혼잡제어 알고리즘 변경 |

> **참고**: Linux 튜닝 기능은 아직 실제 Linux 환경에서의 통합 테스트가 완료되지 않았습니다. 사용 시 예상치 못한 동작이 있을 수 있으며, 적용 전 반드시 백업을 생성하시기 바랍니다.

## 튜닝 팁 및 주의 사항
- **10Gbps 이상**의 고속망을 사용한다면 MTU를 **9000**으로 설정하는 것을 권장합니다.
- 장거리 전송(LFN) 환경에서는 혼잡제어 알고리즘을 **BBR**로 변경하면 성능이 대폭 향상될 수 있습니다 (Linux 4.9 이상).
- 시스템 버퍼 크기는 **BDP(Bandwidth-Delay Product)** 값에 따라 확장해야 합니다.
- ⚠️ **주의 사항**:
    - **Wi-Fi 연결**을 사용하는 노트북이나 **100Mbps 이하**의 속도로 연결된 시스템에서는 본 프로그램의 튜닝 설정을 적용하지 않는 것이 좋습니다.
    - 저속망이나 불안정한 무선 환경에서 무리하게 버퍼 크기를 키울 경우, 오히려 **오버헤드 발생으로 인한 성능 저하**가 나타날 수 있습니다.
